<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="relacionCoreHiloTejido" language="groovy" pageWidth="612" pageHeight="792" columnWidth="612" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="940b7624-42a9-4970-8b76-59c4ab579c3b">
	<property name="ireport.zoom" value="2.027650658156845"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="net.sf.jasperreports.export.xls.remove.empty.space.between.rows" value="true"/>
	<property name="net.sf.jasperreports.export.xls.remove.empty.space.between.columns" value="true"/>
	<property name="net.sf.jasperreports.export.xls.white.page.background" value="false"/>
	<property name="net.sf.jasperreports.export.xls.detect.cell.type" value="true"/>
	<property name="net.sf.jasperreports.export.xls.ignore.graphics" value="false"/>
	<property name="net.sf.jasperreports.page.break.no.pagination" value="apply"/>
	<property name="net.sf.jasperreports.export.xls.one.page.per.sheet" value="false"/>
	<property name="net.sf.jasperreports.print.keep.full.text" value="true"/>
	<property name="net.sf.jasperreports.exports.xls.font.size.fix.enabled" value="false"/>
	<property name="net.sf.jasperreports.export.xls.auto.fit.row" value="false"/>
	<property name="net.sf.jasperreports.export.xls.auto.fit.column" value="false"/>
	<property name="net.sf.jasperreports.export.xls.wrap.text" value="false"/>
	<style name="Title" forecolor="#FFFFFF" fontName="Arial" fontSize="26" isBold="true" pdfFontName="Helvetica-Bold"/>
	<style name="SubTitle" forecolor="#666666" fontName="Arial" fontSize="18"/>
	<style name="Column header" forecolor="#666666" fontName="Arial" fontSize="12" isBold="true"/>
	<style name="Detail" fontName="Arial" fontSize="12"/>
	<parameter name="logo" class="java.lang.String"/>
	<parameter name="empresa" class="java.lang.String"/>
	<parameter name="sem" class="java.lang.String"/>
	<parameter name="ano" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT CAST(d.clave AS SIGNED) AS numdepto, d.descripcion AS nomdepto,
c.numemp, c.nomemp, COUNT(c.numemp) AS cantidad , SUM(c.cantida) AS importe
FROM comida c
JOIN empleados e ON e.numero = c.numemp
JOIN departamentos d ON e.departamentofisico  = d.clave
WHERE c.año = $P{ano} AND c.sem = $P{sem}
GROUP BY c.numemp
ORDER BY numdepto, ABS(c.nomemp) ASC]]>
	</queryString>
	<field name="numdepto" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nomdepto" class="java.lang.String"/>
	<field name="numemp" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nomemp" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cantidad" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="importe" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="cantidad_1" class="java.lang.Long" resetType="Group" resetGroup="depto" calculation="Sum">
		<variableExpression><![CDATA[$F{cantidad}]]></variableExpression>
	</variable>
	<variable name="cantidad_2" class="java.lang.Long" calculation="Sum">
		<variableExpression><![CDATA[$F{cantidad}]]></variableExpression>
	</variable>
	<variable name="importe_1" class="java.lang.Double" resetType="Group" resetGroup="depto" calculation="Sum">
		<variableExpression><![CDATA[$F{importe}]]></variableExpression>
	</variable>
	<variable name="importe_2" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{importe}]]></variableExpression>
	</variable>
	<group name="depto" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{numdepto}]]></groupExpression>
		<groupHeader>
			<band height="11">
				<textField>
					<reportElement isPrintRepeatedValues="false" x="0" y="0" width="27" height="11" isPrintInFirstWholeBand="true" uuid="bc74b258-74ec-48e2-bddb-3acb29927d41"/>
					<textElement textAlignment="Right">
						<font size="8" isBold="true"/>
						<paragraph rightIndent="3"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{numdepto}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement isPrintRepeatedValues="false" x="27" y="0" width="187" height="11" isPrintInFirstWholeBand="true" uuid="4332160f-51f9-42c3-bcf6-e83514283f26"/>
					<textElement>
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{nomdepto}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="13">
				<textField>
					<reportElement mode="Transparent" x="241" y="0" width="186" height="12" isPrintInFirstWholeBand="true" forecolor="#000000" backcolor="#FFFFFF" uuid="afb435eb-d0ce-4e17-85d6-7c790e8cf529"/>
					<textElement textAlignment="Left" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA["Total por departamento"]]></textFieldExpression>
				</textField>
				<textField pattern="###0" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="427" y="0" width="34" height="12" forecolor="#000000" backcolor="#FFFFFF" uuid="9858fe05-1c60-4ce9-b51d-5e76553cbca3"/>
					<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{cantidad_1}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="461" y="0" width="56" height="12" forecolor="#000000" backcolor="#FFFFFF" uuid="2ac098a1-eb61-4f54-a631-e7424c9d22e4"/>
					<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{importe_1}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="56" splitType="Stretch">
			<staticText>
				<reportElement style="Column header" x="27" y="41" width="187" height="15" forecolor="#000000" uuid="e060d432-48d9-48a1-8673-13aae0d018bc"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Departamento]]></text>
			</staticText>
			<textField>
				<reportElement x="27" y="0" width="187" height="15" uuid="68fc90ba-2f75-4f0d-b92d-9142efaf6ecc"/>
				<textElement>
					<font fontName="SansSerif" size="11" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{empresa}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="Column header" x="27" y="15" width="187" height="14" forecolor="#000000" uuid="fe0dcb59-670e-41bc-8ce4-9fe8d186d05f"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Reporte de comidas de la semana:]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="427" y="15" width="34" height="14" forecolor="#000000" uuid="241f50af-a10a-45b4-aaec-9ba6f37d9786"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Año:]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="461" y="41" width="56" height="15" forecolor="#000000" uuid="37b7b08d-3077-4086-9564-38f36b13aef1"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Importe]]></text>
			</staticText>
			<textField>
				<reportElement x="214" y="15" width="27" height="14" uuid="af01c898-11bc-4d2f-b001-c13e4e5f8653"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{sem}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="461" y="15" width="56" height="14" uuid="48c2220c-099e-4592-b439-0bcd31c060ce"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{ano}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="Column header" x="427" y="41" width="34" height="15" forecolor="#000000" uuid="d2a006b7-15bb-4e50-a2e2-44d31a18e14d"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Comidas]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="241" y="41" width="186" height="15" forecolor="#000000" uuid="b47811c9-892d-41bc-8b82-9c86ab02af8c"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Empleado]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="13" splitType="Stretch">
			<textField>
				<reportElement isPrintRepeatedValues="false" x="241" y="0" width="186" height="13" isPrintInFirstWholeBand="true" uuid="700ced94-6cdf-46fc-8dcb-407eed2ce999"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nomemp}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="461" y="0" width="56" height="13" uuid="0b9cf1d6-174f-4703-be5c-0fd550562dad"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{importe}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement isPrintRepeatedValues="false" x="214" y="0" width="27" height="13" isPrintInFirstWholeBand="true" uuid="a4840844-9bcf-4d79-874c-2261fdc3baf2"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{numemp}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="427" y="0" width="34" height="13" uuid="c1dbe661-a590-4383-bd3b-98311c120202"/>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cantidad}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="14" splitType="Stretch">
			<staticText>
				<reportElement style="Column header" x="241" y="1" width="186" height="12" forecolor="#000000" uuid="bf4b6b79-8bad-420e-a7ba-97568b08664a"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Total general:]]></text>
			</staticText>
			<textField pattern="###0" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="427" y="1" width="34" height="12" forecolor="#000000" backcolor="#FFFFFF" uuid="441a164b-731a-4cc3-a85b-b4b6b58210e7"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cantidad_2}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="461" y="0" width="56" height="13" forecolor="#000000" backcolor="#FFFFFF" uuid="769f042a-1e80-4050-ba7d-0a00d05c4915"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{importe_2}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
