<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="relacionCoreHiloTejido" language="groovy" pageWidth="612" pageHeight="792" columnWidth="588" leftMargin="12" rightMargin="12" topMargin="12" bottomMargin="12" uuid="940b7624-42a9-4970-8b76-59c4ab579c3b">
	<property name="ireport.zoom" value="2.027650658156828"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="Title" forecolor="#FFFFFF" fontName="Arial" fontSize="26" isBold="true" pdfFontName="Helvetica-Bold"/>
	<style name="SubTitle" forecolor="#666666" fontName="Arial" fontSize="18"/>
	<style name="Column header" forecolor="#666666" fontName="Arial" fontSize="12" isBold="true"/>
	<style name="Detail" fontName="Arial" fontSize="12"/>
	<parameter name="logo" class="java.lang.String"/>
	<parameter name="empresa" class="java.lang.String"/>
	<parameter name="Cliente" class="java.lang.String"/>
	<parameter name="nomCliente" class="java.lang.String"/>
	<queryString>
		<![CDATA[select
f.cliente, f.estilo, f.combin,  f.colsuel, sum(f.pareped) as pares,
min(f.fecha) as fechaprimventa,
max(f.fecha) as fechaultVenta,
(select precto from facturacion where cliente = f.cliente and staped < 3 and fecha = min(f.fecha) and estilo = f.estilo and combin = f.combin limit 1) as primPrecio,
(select precto from facturacion where cliente = f.cliente and staped < 3 and fecha = max(f.fecha) and estilo = f.estilo and combin = f.combin limit 1) as ultPrecio
from facturacion f
where f.cliente = $P{Cliente}
and f.staped < 3
group by f.estilo, f.combin
order by f.estilo asc, f.combin asc, f.fecha asc;]]>
	</queryString>
	<field name="cliente" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="estilo" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="combin" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="colsuel" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="pares" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fechaprimventa" class="java.sql.Timestamp"/>
	<field name="fechaultVenta" class="java.sql.Timestamp"/>
	<field name="primPrecio" class="java.lang.Double"/>
	<field name="ultPrecio" class="java.lang.Double"/>
	<variable name="Pares_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{pares}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="54" splitType="Stretch">
			<line>
				<reportElement style="Title" positionType="FixRelativeToBottom" x="0" y="53" width="577" height="1" uuid="54f5e41a-81ad-4684-8fc1-fe3bd8cb3d8a"/>
				<graphicElement>
					<pen lineWidth="1.0" lineColor="#000000"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement x="488" y="0" width="80" height="12" uuid="6b713664-7e14-470b-817e-114b62f12fc2"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Pag. "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="569" y="0" width="15" height="12" uuid="bb3d53dd-52de-441b-8f18-2279ef0c01e7"/>
				<textElement textAlignment="Left">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="EEE, d MMM yyyy HH:mm:ss">
				<reportElement x="477" y="12" width="107" height="12" uuid="e1425944-7e58-40bd-8d33-418fa9ddc808"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="0" y="0" width="72" height="42" uuid="badb8959-f8da-4109-a197-4fe402e5e4a3"/>
				<imageExpression><![CDATA[$P{logo}]]></imageExpression>
			</image>
			<textField>
				<reportElement x="77" y="-2" width="159" height="14" uuid="68fc90ba-2f75-4f0d-b92d-9142efaf6ecc"/>
				<textElement>
					<font fontName="SansSerif" size="11" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{empresa}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="Column header" x="77" y="10" width="145" height="14" forecolor="#000000" uuid="fe0dcb59-670e-41bc-8ce4-9fe8d186d05f"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Ventas Ranking - Estilo/Color/Cliente]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="1" y="42" width="52" height="11" forecolor="#000000" uuid="5f608149-fea8-4916-872c-4d3150caf9eb"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Estilo]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="55" y="42" width="59" height="11" forecolor="#000000" uuid="52e02e78-bbcd-43ae-ba15-8d55e05891d3"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Color]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="508" y="42" width="35" height="11" forecolor="#000000" uuid="020eb9a6-0cff-4b25-a99e-25935ad89397"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Pares]]></text>
			</staticText>
			<textField>
				<reportElement x="222" y="10" width="255" height="14" uuid="15e3ae12-e6e3-439f-b6ee-be7e297a304d"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{nomCliente}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="Column header" x="216" y="42" width="59" height="11" forecolor="#000000" uuid="caa9d8bc-4d5c-4d1b-ad79-4b8a2ea95511"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[1ra. Venta]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="275" y="42" width="59" height="11" forecolor="#000000" uuid="966c9cb1-d1f3-4277-97d2-303e9f09a6c1"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Ult. Venta]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="334" y="42" width="59" height="11" forecolor="#000000" uuid="a9156af9-0445-4454-b5da-1ac4fae8bb1f"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[1er Precio]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="393" y="42" width="59" height="11" forecolor="#000000" uuid="2040f568-adb8-4844-a254-cf1d5c910050"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Ult Precio]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="12" splitType="Stretch">
			<line>
				<reportElement positionType="FixRelativeToBottom" x="1" y="11" width="555" height="1" uuid="9c27175e-eeaf-4784-a04e-2bdb9e6f6f58"/>
				<graphicElement>
					<pen lineWidth="0.5" lineColor="#999999"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement x="1" y="0" width="52" height="11" uuid="934c83aa-a11d-488f-a131-4e70712097dd"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{estilo}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="508" y="0" width="35" height="11" uuid="7991678e-f5a7-425b-b21c-21c109f05935"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{pares}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="55" y="0" width="17" height="11" uuid="48fc63f0-6dea-47df-bd34-6d7b013a4072"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{combin}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="77" y="0" width="127" height="11" uuid="58086b70-7b84-4ddf-b511-6928e4f7d471"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{colsuel}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="216" y="0" width="59" height="11" uuid="bc59bd84-84ab-4f1b-b8a6-f4e29ee23ca0"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fechaprimventa}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="275" y="0" width="59" height="11" uuid="e52ac5f4-b94e-49be-9968-4976300554f1"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fechaultVenta}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00" isBlankWhenNull="true">
				<reportElement x="334" y="0" width="59" height="11" uuid="858661ca-743c-44c2-b2aa-92e5f665c7f6"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{primPrecio}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00" isBlankWhenNull="true">
				<reportElement x="393" y="0" width="59" height="11" uuid="f241eac5-c9e9-4b2e-b4f7-c04cc2f58677"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{ultPrecio}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="14" splitType="Stretch">
			<staticText>
				<reportElement style="Column header" x="435" y="1" width="56" height="12" forecolor="#000000" uuid="bf4b6b79-8bad-420e-a7ba-97568b08664a"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Total general:]]></text>
			</staticText>
			<line>
				<reportElement x="435" y="0" width="121" height="1" uuid="277bb294-e74f-4298-8ce3-f97c247295db"/>
			</line>
			<textField pattern="###0">
				<reportElement x="508" y="1" width="35" height="12" uuid="3685929e-575a-44f7-86d3-d8ac5718a3b2"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{Pares_1}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
