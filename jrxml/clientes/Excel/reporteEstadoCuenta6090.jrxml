<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="relacionCoreHiloTejido" language="groovy" pageWidth="612" pageHeight="792" columnWidth="612" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="940b7624-42a9-4970-8b76-59c4ab579c3b">
	<property name="ireport.zoom" value="3.5921068276150296"/>
	<property name="ireport.x" value="612"/>
	<property name="ireport.y" value="0"/>
	<property name="net.sf.jasperreports.export.xls.remove.empty.space.between.rows" value="true"/>
	<property name="net.sf.jasperreports.export.xls.remove.empty.space.between.columns" value="true"/>
	<property name="net.sf.jasperreports.export.xls.white.page.background" value="false"/>
	<property name="net.sf.jasperreports.export.xls.detect.cell.type" value="true"/>
	<property name="net.sf.jasperreports.export.xls.ignore.graphics" value="false"/>
	<property name="net.sf.jasperreports.page.break.no.pagination" value="apply"/>
	<property name="net.sf.jasperreports.export.xls.one.page.per.sheet" value="false"/>
	<property name="net.sf.jasperreports.print.keep.full.text" value="true"/>
	<property name="net.sf.jasperreports.exports.xls.font.size.fix.enabled" value="false"/>
	<property name="net.sf.jasperreports.export.xls.auto.fit.row" value="false"/>
	<property name="net.sf.jasperreports.export.xls.auto.fit.column" value="false"/>
	<property name="net.sf.jasperreports.export.xls.wrap.text" value="false"/>
	<style name="Title" forecolor="#FFFFFF" fontName="Arial" fontSize="26" isBold="true" pdfFontName="Helvetica-Bold"/>
	<style name="SubTitle" forecolor="#666666" fontName="Arial" fontSize="18"/>
	<style name="Column header" forecolor="#666666" fontName="Arial" fontSize="12" isBold="true"/>
	<style name="Detail" fontName="Arial" fontSize="12"/>
	<parameter name="logo" class="java.lang.String"/>
	<parameter name="empresa" class="java.lang.String"/>
	<parameter name="dCliente" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="aCliente" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="tp" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="dias" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[select
Ag.Clave as numagente,
Ag.Nombre as nomagente,
cc.cliente,
ifnull(ct.RazonS,'') as nomcliente, ct.DiasPlazo,
sum(cc.importe) as importe,
sum(cc.pagos) as pagos,
sum(cc.saldo) as saldo,
sum(CASE WHEN DATEDIFF(now(), cc.fecha) >= $P{dias} THEN cc.saldo ELSE 0 END) AS 'dias6090',
case when cc.nc = 999 then 'HAY ANTICIPOS' end as anticipos
from cartcliente cc
join clientes ct on ct.clave = cc.cliente
join agentes Ag on Ag.Clave = ct.Agente
where cc.cliente between $P{dCliente} and $P{aCliente}
and cc.status < 3
and cc.saldo > 0
and cc.tipo like concat('%',$P{tp},'%')
group by numagente, cc.cliente
order by abs(numagente), cc.cliente asc]]>
	</queryString>
	<field name="numagente" class="java.lang.String"/>
	<field name="nomagente" class="java.lang.String"/>
	<field name="cliente" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nomcliente" class="java.lang.String"/>
	<field name="DiasPlazo" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="importe" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="pagos" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="saldo" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="dias6090" class="java.lang.Double"/>
	<field name="anticipos" class="java.lang.String"/>
	<variable name="importe_1" class="java.lang.Double" resetType="Group" resetGroup="Agente" calculation="Sum">
		<variableExpression><![CDATA[$F{importe}]]></variableExpression>
	</variable>
	<variable name="pagos_1" class="java.lang.Double" resetType="Group" resetGroup="Agente" calculation="Sum">
		<variableExpression><![CDATA[$F{pagos}]]></variableExpression>
	</variable>
	<variable name="saldo_1" class="java.lang.Double" resetType="Group" resetGroup="Agente" calculation="Sum">
		<variableExpression><![CDATA[$F{saldo}]]></variableExpression>
	</variable>
	<variable name="dias6090_1" class="java.lang.Double" resetType="Group" resetGroup="Agente" calculation="Sum">
		<variableExpression><![CDATA[$F{dias6090}]]></variableExpression>
	</variable>
	<variable name="importe_2" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{importe}]]></variableExpression>
	</variable>
	<variable name="pagos_2" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{pagos}]]></variableExpression>
	</variable>
	<variable name="saldo_2" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{saldo}]]></variableExpression>
	</variable>
	<variable name="dias6090_2" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{dias6090}]]></variableExpression>
	</variable>
	<filterExpression><![CDATA[$F{dias6090}>0]]></filterExpression>
	<group name="Agente" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{numagente}]]></groupExpression>
		<groupHeader>
			<band height="13">
				<textField>
					<reportElement x="26" y="0" width="172" height="13" uuid="3d0d5503-9fae-4f05-bf5d-6b6ec426a26a"/>
					<textElement verticalAlignment="Middle">
						<font size="7" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{nomagente}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="0" y="0" width="26" height="13" uuid="5f857078-5841-49d6-bf8f-69a0525c8265"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="7" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{numagente}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="13">
				<staticText>
					<reportElement style="Column header" x="26" y="0" width="172" height="13" forecolor="#000000" uuid="4d61550f-8735-4b2a-a4cb-531eae3dfd67"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[Total por agente]]></text>
				</staticText>
				<textField pattern="#,##0.00" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="227" y="0" width="72" height="13" forecolor="#000000" backcolor="#FFFFFF" uuid="2740766b-603b-44c5-aca9-f31c254ec055"/>
					<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{importe_1}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="299" y="0" width="71" height="13" forecolor="#000000" backcolor="#FFFFFF" uuid="335615a3-4835-4f22-93fd-9f1975e8779c"/>
					<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{pagos_1}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="370" y="0" width="71" height="13" forecolor="#000000" backcolor="#FFFFFF" uuid="6ab2a9e6-4692-495e-a3d4-964a3a623432"/>
					<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{saldo_1}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="441" y="0" width="70" height="13" forecolor="#000000" backcolor="#FFFFFF" uuid="c8e97be7-5d3c-43db-8514-cd40be9c9db5"/>
					<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{dias6090_1}]]></textFieldExpression>
				</textField>
				<textField evaluationTime="Auto" pattern="#,##0.00 %" isBlankWhenNull="true">
					<reportElement x="511" y="0" width="76" height="13" uuid="19f6ea3b-6ef1-4345-870f-48a574b52b05"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="7" isBold="false" isItalic="false" isUnderline="false"/>
						<paragraph rightIndent="3"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{dias6090_1}/$V{dias6090_2}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="37">
			<staticText>
				<reportElement style="Column header" x="26" y="14" width="172" height="12" forecolor="#000000" uuid="fe0dcb59-670e-41bc-8ce4-9fe8d186d05f"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Cartera de clientes del cliente]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="0" y="26" width="26" height="11" forecolor="#000000" uuid="038bc91a-0ccc-4a1b-a796-16a5d9f8eb59"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Cliente]]></text>
			</staticText>
			<textField>
				<reportElement mode="Transparent" x="198" y="14" width="29" height="12" forecolor="#000000" backcolor="#FFFFFF" uuid="cf1bb3bf-81f3-4b8f-a21d-ea7778fb3436"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="8" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{dCliente}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="Column header" x="227" y="14" width="72" height="12" forecolor="#000000" uuid="9939c8e4-0019-42b7-8dd5-d294a608d033"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[al]]></text>
			</staticText>
			<textField>
				<reportElement mode="Transparent" x="299" y="14" width="71" height="12" forecolor="#000000" backcolor="#FFFFFF" uuid="a9b2597b-6232-4b94-a600-046e0153c172"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="8" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{aCliente}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="Column header" x="227" y="26" width="72" height="11" forecolor="#000000" uuid="ff8586ec-d2ec-40b9-a595-7dceca257419"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Importe]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="299" y="26" width="71" height="11" forecolor="#000000" uuid="31046297-643c-4ea1-b4be-1a2ba58fbb5f"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Pagos]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="370" y="26" width="71" height="11" forecolor="#000000" uuid="cde1bcc9-7375-47ec-88f6-7ea9d097427c"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Saldo]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="198" y="26" width="29" height="11" forecolor="#000000" uuid="3d4b4c60-1c49-45be-8517-bf8f5d828581"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Días]]></text>
			</staticText>
			<textField>
				<reportElement mode="Transparent" x="441" y="26" width="70" height="11" forecolor="#000000" backcolor="#FFFFFF" uuid="96cf75d3-3a20-4f84-8be5-83436055429d"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA["más de "+ $P{dias}+" días"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="Column header" x="370" y="14" width="71" height="12" forecolor="#000000" uuid="2ab3062a-c031-428a-856f-e850c14e01c5"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Tp]]></text>
			</staticText>
			<textField>
				<reportElement mode="Transparent" x="441" y="14" width="70" height="12" forecolor="#000000" backcolor="#FFFFFF" uuid="cb619a79-4880-4772-ae38-140377a47bbe"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="8" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[($P{tp}!="")?$P{tp}: "1 y 2"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="26" y="0" width="172" height="14" uuid="f33e602e-868f-4c8d-a696-81ab1343c48c"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{empresa}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<detail>
		<band height="13" splitType="Stretch">
			<printWhenExpression><![CDATA[$F{dias6090}>0]]></printWhenExpression>
			<textField pattern="###0">
				<reportElement x="0" y="0" width="26" height="13" uuid="98c62c75-649e-4b22-9ef4-79681b110e41"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="7"/>
					<paragraph rightIndent="3"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cliente}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="26" y="0" width="172" height="13" uuid="c9a06762-bd19-43dc-818e-de6c833bc533"/>
				<textElement verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nomcliente}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="227" y="0" width="72" height="13" uuid="231f9526-7da4-412d-9c7b-d09500c60012">
					<printWhenExpression><![CDATA[$F{importe} > 0]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{importe}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="299" y="0" width="71" height="13" uuid="0cdd6e2e-4ce5-46d9-b079-d534e39e116f">
					<printWhenExpression><![CDATA[$F{pagos} > 0]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{pagos}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="370" y="0" width="71" height="13" uuid="ab7c5b5f-c390-4856-9b20-343ffcc0681e">
					<printWhenExpression><![CDATA[$F{saldo}>0]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{saldo}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="198" y="0" width="29" height="13" uuid="809b0e0f-6a86-45b3-a705-96845f5e3a2b"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{DiasPlazo}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="441" y="0" width="70" height="13" uuid="31b93a63-163b-4209-bcb6-bc3a75fc9687"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dias6090}]]></textFieldExpression>
			</textField>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="511" y="0" width="76" height="13" uuid="ee0a5b66-34d4-46f9-8bf0-c4927ee53efa"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{anticipos}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="10" splitType="Stretch">
			<staticText>
				<reportElement style="Column header" x="26" y="0" width="172" height="10" forecolor="#000000" uuid="bf4b6b79-8bad-420e-a7ba-97568b08664a"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Total general:]]></text>
			</staticText>
			<textField pattern="#,##0.00" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="227" y="0" width="72" height="10" forecolor="#000000" backcolor="#FFFFFF" uuid="65aea0f8-546d-4aa9-b308-8e6db4b335d6"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{importe_2}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="299" y="0" width="71" height="10" forecolor="#000000" backcolor="#FFFFFF" uuid="f261b416-a4d0-44f8-ba34-03f7bc80ecae"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{pagos_2}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="370" y="0" width="71" height="10" forecolor="#000000" backcolor="#FFFFFF" uuid="f3215619-318d-4173-a38d-a6c67bd9cb06"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{saldo_2}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="441" y="0" width="70" height="10" forecolor="#000000" backcolor="#FFFFFF" uuid="c1ea50f6-664c-4773-ab24-7390e35f0b30"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{dias6090_2}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
