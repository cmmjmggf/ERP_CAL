<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="relacionCoreHiloTejido" language="groovy" pageWidth="612" pageHeight="792" columnWidth="588" leftMargin="12" rightMargin="12" topMargin="12" bottomMargin="12" uuid="940b7624-42a9-4970-8b76-59c4ab579c3b">
	<property name="ireport.zoom" value="4.346449261414193"/>
	<property name="ireport.x" value="1564"/>
	<property name="ireport.y" value="58"/>
	<style name="Title" forecolor="#FFFFFF" fontName="Arial" fontSize="26" isBold="true" pdfFontName="Helvetica-Bold"/>
	<style name="SubTitle" forecolor="#666666" fontName="Arial" fontSize="18"/>
	<style name="Column header" forecolor="#666666" fontName="Arial" fontSize="12" isBold="true"/>
	<style name="Detail" fontName="Arial" fontSize="12"/>
	<parameter name="logo" class="java.lang.String"/>
	<parameter name="empresa" class="java.lang.String"/>
	<parameter name="dCliente" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="fechaIni" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="fechaFin" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select cc.cliente, ct.RazonS as nomcliente,
cc.tipo,
cc.remicion,
cc.fecha,
(select sum(pareped) from facturacion where tp = cc.tipo and cliente = cc.cliente and factura = cc.remicion)as pares,
cc.importe,
cc.saldo,
cp.fechadep,
cp.doctopa,
cp.importe as impopago,
datediff(cp.fechadep,cc.fecha) as dias
from cartcliente cc
join cartctepagos cp on cc.cliente = cp.cliente and cc.remicion = cp.remicion and cc.tipo = cp.tipo
join clientes ct on ct.clave = cc.cliente
where cc.cliente = $P{dCliente}
and cc.fecha between $P{fechaIni} and $P{fechaFin}
and cc.status < 4
order by cc.tipo, cc.remicion, cp.fechadep asc]]>
	</queryString>
	<field name="cliente" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nomcliente" class="java.lang.String"/>
	<field name="tipo" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="remicion" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fecha" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="pares" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="importe" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="saldo" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fechadep" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="doctopa" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="impopago" class="java.lang.Float"/>
	<field name="dias" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="impopago_1" class="java.lang.Float" resetType="Group" resetGroup="Docto" calculation="Sum">
		<variableExpression><![CDATA[$F{impopago}]]></variableExpression>
	</variable>
	<variable name="impopago_2" class="java.lang.Float" resetType="Group" resetGroup="Tp" calculation="Sum">
		<variableExpression><![CDATA[$F{impopago}]]></variableExpression>
	</variable>
	<variable name="impopago_3" class="java.lang.Float" calculation="Sum">
		<variableExpression><![CDATA[$F{impopago}]]></variableExpression>
	</variable>
	<variable name="dias_1" class="java.lang.Long" resetType="Group" resetGroup="Docto" calculation="Average">
		<variableExpression><![CDATA[$F{dias}]]></variableExpression>
	</variable>
	<variable name="dias_2" class="java.lang.Long" resetType="Group" resetGroup="Tp" calculation="Average">
		<variableExpression><![CDATA[$F{dias}]]></variableExpression>
	</variable>
	<variable name="dias_3" class="java.lang.Long" calculation="Average">
		<variableExpression><![CDATA[$F{dias}]]></variableExpression>
	</variable>
	<group name="Tp" isStartNewPage="true">
		<groupExpression><![CDATA[$F{tipo}]]></groupExpression>
		<groupHeader>
			<band height="11">
				<textField>
					<reportElement x="15" y="0" width="19" height="11" uuid="7e54f5fe-d525-4ad0-8de9-1214941b4452"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{tipo}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="1" y="10" width="35" height="1" uuid="58113119-fb2d-436e-8505-ad0e64d3e281"/>
				</line>
				<staticText>
					<reportElement style="Column header" x="1" y="0" width="14" height="11" forecolor="#000000" uuid="b5f5816d-a059-4603-87ce-0ca30e888082"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[Tp:]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="12">
				<staticText>
					<reportElement style="Column header" x="95" y="0" width="55" height="12" forecolor="#000000" uuid="73aab65c-f55f-4785-84dc-429d16111cae"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[Total por tipo:]]></text>
				</staticText>
				<line>
					<reportElement x="156" y="0" width="431" height="1" uuid="002f1c81-266d-4693-8d76-80aacfdf4f88"/>
				</line>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="410" y="1" width="60" height="11" forecolor="#000000" backcolor="#FFFFFF" uuid="21bcc066-7f7a-451f-bf03-0883d94e751c"/>
					<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{impopago_2}]]></textFieldExpression>
				</textField>
				<textField pattern="###0" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="534" y="1" width="25" height="11" forecolor="#000000" backcolor="#FFFFFF" uuid="471ee044-9841-4d51-bb0f-2f255011589e"/>
					<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{dias_2}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<group name="Docto" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{remicion}]]></groupExpression>
		<groupHeader>
			<band height="12">
				<line>
					<reportElement x="56" y="11" width="175" height="1" uuid="c82d71a9-db8d-4921-aaee-82612fa33078"/>
				</line>
				<textField pattern="###0">
					<reportElement x="56" y="1" width="44" height="11" uuid="98c62c75-649e-4b22-9ef4-79681b110e41"/>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{remicion}]]></textFieldExpression>
				</textField>
				<textField pattern="dd/MM/yyyy">
					<reportElement x="104" y="1" width="41" height="11" uuid="43eaab58-7071-4c81-adc5-ea2348f62b95"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{fecha}]]></textFieldExpression>
				</textField>
				<textField pattern="¤ #,##0.00">
					<reportElement x="161" y="1" width="70" height="11" uuid="6a6da0d5-0689-47b1-8950-00affa197704">
						<printWhenExpression><![CDATA[$F{importe} > 0]]></printWhenExpression>
					</reportElement>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{importe}]]></textFieldExpression>
				</textField>
				<textField pattern="¤ #,##0.00">
					<reportElement x="470" y="1" width="60" height="11" uuid="1ebea1c1-68fc-4d83-b875-7adcdc19e4cf">
						<printWhenExpression><![CDATA[$F{saldo}>0]]></printWhenExpression>
					</reportElement>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{saldo}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="12">
				<staticText>
					<reportElement style="Column header" x="318" y="0" width="80" height="11" forecolor="#000000" uuid="4d61550f-8735-4b2a-a4cb-531eae3dfd67"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[Total por documento:]]></text>
				</staticText>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="410" y="0" width="60" height="11" forecolor="#000000" backcolor="#FFFFFF" uuid="c05d5d6d-674d-4d97-8c6a-52127e261d8b"/>
					<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{impopago_1}]]></textFieldExpression>
				</textField>
				<textField pattern="###0" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="534" y="0" width="25" height="11" forecolor="#000000" backcolor="#FFFFFF" uuid="4f23df65-4627-4404-918c-550a06aadc57"/>
					<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{dias_1}]]></textFieldExpression>
				</textField>
				<textField pattern="###0" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="559" y="0" width="25" height="11" forecolor="#000000" backcolor="#FFFFFF" uuid="6418847f-2164-43e8-aadd-5897ea360c8e"/>
					<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{pares}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="54" splitType="Stretch">
			<line>
				<reportElement style="Title" positionType="FixRelativeToBottom" x="1" y="53" width="586" height="1" uuid="54f5e41a-81ad-4684-8fc1-fe3bd8cb3d8a"/>
				<graphicElement>
					<pen lineWidth="1.0" lineColor="#000000"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement x="491" y="0" width="80" height="12" uuid="6b713664-7e14-470b-817e-114b62f12fc2"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Pag. "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="572" y="0" width="15" height="12" uuid="bb3d53dd-52de-441b-8f18-2279ef0c01e7"/>
				<textElement textAlignment="Left">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="EEE, d MMM yyyy HH:mm:ss">
				<reportElement x="448" y="12" width="139" height="12" uuid="e1425944-7e58-40bd-8d33-418fa9ddc808"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="0" y="0" width="72" height="42" uuid="badb8959-f8da-4109-a197-4fe402e5e4a3"/>
				<imageExpression><![CDATA[$P{logo}]]></imageExpression>
			</image>
			<textField>
				<reportElement x="77" y="-2" width="159" height="14" uuid="68fc90ba-2f75-4f0d-b92d-9142efaf6ecc"/>
				<textElement>
					<font fontName="SansSerif" size="11" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{empresa}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="Column header" x="77" y="12" width="143" height="12" forecolor="#000000" uuid="fe0dcb59-670e-41bc-8ce4-9fe8d186d05f"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Histórico de movimientos del cliente ]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="104" y="42" width="41" height="11" forecolor="#000000" uuid="a45cf72f-3edd-4766-8ae1-c7d097b86d7f"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Fec-Docto]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="56" y="42" width="44" height="11" forecolor="#000000" uuid="4f064204-7e37-4de6-a8b3-485e5abf0e7d"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Docto]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="161" y="42" width="70" height="11" forecolor="#000000" uuid="ff8586ec-d2ec-40b9-a595-7dceca257419"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Importe]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="410" y="42" width="60" height="11" forecolor="#000000" uuid="cde1bcc9-7375-47ec-88f6-7ea9d097427c"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Imp.Pago]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="534" y="42" width="25" height="11" forecolor="#000000" uuid="3d4b4c60-1c49-45be-8517-bf8f5d828581"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Días]]></text>
			</staticText>
			<textField>
				<reportElement x="246" y="12" width="191" height="12" uuid="3d0d5503-9fae-4f05-bf5d-6b6ec426a26a"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nomcliente}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="220" y="12" width="22" height="12" uuid="5f857078-5841-49d6-bf8f-69a0525c8265"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cliente}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="Column header" x="242" y="42" width="41" height="11" forecolor="#000000" uuid="2c62110a-a8c1-4d22-8855-765eebd950bf"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Fec-Pago]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="289" y="42" width="47" height="11" forecolor="#000000" uuid="3211fd44-5ec5-4715-800a-0df38a011195"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Referencia]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="470" y="42" width="60" height="11" forecolor="#000000" uuid="5793ea7e-5557-4105-8a06-a4f6d3efd530"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Saldo]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="559" y="42" width="25" height="11" forecolor="#000000" uuid="7f1abfd5-d942-4f83-88e5-8f7bf04c92e1"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Pares]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="11" splitType="Stretch">
			<line>
				<reportElement positionType="FixRelativeToBottom" x="240" y="10" width="347" height="1" uuid="9c27175e-eeaf-4784-a04e-2bdb9e6f6f58"/>
				<graphicElement>
					<pen lineWidth="0.5" lineColor="#999999"/>
				</graphicElement>
			</line>
			<textField pattern="¤ #,##0.00">
				<reportElement x="410" y="0" width="60" height="11" uuid="ab7c5b5f-c390-4856-9b20-343ffcc0681e">
					<printWhenExpression><![CDATA[$F{impopago}>0]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{impopago}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="534" y="0" width="25" height="11" uuid="809b0e0f-6a86-45b3-a705-96845f5e3a2b"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dias}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="242" y="0" width="41" height="11" uuid="6916fd28-6eca-43fd-8224-333e5d3c7d90"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fechadep}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="289" y="0" width="121" height="11" uuid="67d21c58-f132-41c6-a554-14aaafdd2eb1"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{doctopa}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="13" splitType="Stretch">
			<staticText>
				<reportElement style="Column header" x="95" y="1" width="55" height="12" forecolor="#000000" uuid="bf4b6b79-8bad-420e-a7ba-97568b08664a"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Total general:]]></text>
			</staticText>
			<line>
				<reportElement x="97" y="0" width="490" height="1" uuid="277bb294-e74f-4298-8ce3-f97c247295db"/>
			</line>
			<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="410" y="1" width="60" height="12" forecolor="#000000" backcolor="#FFFFFF" uuid="b41912c8-f2e2-4e6a-b75f-0b6a54da93a7"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{impopago_3}]]></textFieldExpression>
			</textField>
			<textField pattern="###0" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="534" y="1" width="25" height="12" forecolor="#000000" backcolor="#FFFFFF" uuid="640a08aa-1cf7-4eb4-9b44-3ab18337a0bc"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="8" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{dias_3}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
