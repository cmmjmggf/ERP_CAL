<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="relacionCoreHiloTejido" language="groovy" pageWidth="612" pageHeight="792" columnWidth="588" leftMargin="12" rightMargin="12" topMargin="12" bottomMargin="12" uuid="940b7624-42a9-4970-8b76-59c4ab579c3b">
	<property name="ireport.zoom" value="1.6757443455841738"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="Title" forecolor="#FFFFFF" fontName="Arial" fontSize="26" isBold="true" pdfFontName="Helvetica-Bold"/>
	<style name="SubTitle" forecolor="#666666" fontName="Arial" fontSize="18"/>
	<style name="Column header" forecolor="#666666" fontName="Arial" fontSize="12" isBold="true"/>
	<style name="Detail" fontName="Arial" fontSize="12"/>
	<parameter name="logo" class="java.lang.String"/>
	<parameter name="empresa" class="java.lang.String"/>
	<parameter name="ano" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="mes" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="nombreReporte" class="java.lang.String"/>
	<queryString>
		<![CDATA[select cc.remicion, cc.fecha,
cf.cajas, cc.cliente,
ct.RazonS as nomcliente, case when cc.tipo = 1 then cc.importe/1.16 else cc.importe end as importe,
cf.guia, cf.transp, cc.tipo
from cartcliente cc
join cartafac cf on cf.cliente = cc.cliente and cf.factura = cc.remicion and cf.tp = cc.tipo
join clientes ct on ct.clave = cc.cliente
where year(cc.fecha) = $P{ano} and month(cc.fecha) = $P{mes}
and cc.status < 4 and cf.guia <> '0' and cf.guia is not null and cf.guia <>''
order by cc.tipo asc, cc.remicion asc]]>
	</queryString>
	<field name="remicion" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fecha" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cajas" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cliente" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nomcliente" class="java.lang.String"/>
	<field name="importe" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="guia" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="transp" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="tipo" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="cajas_1" class="java.lang.Integer" resetType="Group" resetGroup="Tp" calculation="Sum">
		<variableExpression><![CDATA[$F{cajas}]]></variableExpression>
	</variable>
	<variable name="cajas_2" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{cajas}]]></variableExpression>
	</variable>
	<variable name="importe_1" class="java.lang.Double" resetType="Group" resetGroup="Tp" calculation="Sum">
		<variableExpression><![CDATA[$F{importe}]]></variableExpression>
	</variable>
	<variable name="importe_2" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{importe}]]></variableExpression>
	</variable>
	<group name="Tp" isStartNewPage="true" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[$F{tipo}]]></groupExpression>
		<groupHeader>
			<band height="11">
				<textField>
					<reportElement x="15" y="0" width="19" height="11" uuid="7e54f5fe-d525-4ad0-8de9-1214941b4452"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="7" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{tipo}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="1" y="10" width="35" height="1" uuid="58113119-fb2d-436e-8505-ad0e64d3e281"/>
				</line>
				<staticText>
					<reportElement style="Column header" x="1" y="0" width="19" height="11" forecolor="#000000" uuid="b5f5816d-a059-4603-87ce-0ca30e888082"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[Tp:]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="12">
				<staticText>
					<reportElement style="Column header" x="12" y="0" width="62" height="12" forecolor="#000000" uuid="73aab65c-f55f-4785-84dc-429d16111cae"/>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[Total por tipo:]]></text>
				</staticText>
				<textField pattern="###0" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="81" y="0" width="28" height="12" forecolor="#000000" backcolor="#FFFFFF" uuid="30ff0916-c7d8-4877-a8ea-d6a4bb1fbe22"/>
					<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{cajas_1}]]></textFieldExpression>
				</textField>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement mode="Transparent" x="325" y="0" width="54" height="12" forecolor="#000000" backcolor="#FFFFFF" uuid="7de6ff1b-7dad-4e4b-846a-ce364be0b3e6"/>
					<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{importe_1}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="47" splitType="Stretch">
			<line>
				<reportElement style="Title" positionType="FixRelativeToBottom" x="1" y="46" width="586" height="1" uuid="54f5e41a-81ad-4684-8fc1-fe3bd8cb3d8a"/>
				<graphicElement>
					<pen lineWidth="1.0" lineColor="#000000"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement x="491" y="0" width="80" height="12" uuid="6b713664-7e14-470b-817e-114b62f12fc2"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Pag. "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="572" y="0" width="15" height="12" uuid="bb3d53dd-52de-441b-8f18-2279ef0c01e7"/>
				<textElement textAlignment="Left">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="EEE, d MMM yyyy HH:mm:ss">
				<reportElement x="448" y="12" width="139" height="12" uuid="e1425944-7e58-40bd-8d33-418fa9ddc808"/>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="0" y="0" width="72" height="42" uuid="badb8959-f8da-4109-a197-4fe402e5e4a3"/>
				<imageExpression><![CDATA[$P{logo}]]></imageExpression>
			</image>
			<textField>
				<reportElement x="77" y="-2" width="159" height="14" uuid="68fc90ba-2f75-4f0d-b92d-9142efaf6ecc"/>
				<textElement>
					<font fontName="SansSerif" size="11" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{empresa}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="Column header" x="77" y="10" width="98" height="14" forecolor="#000000" uuid="fe0dcb59-670e-41bc-8ce4-9fe8d186d05f"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="true"/>
				</textElement>
				<text><![CDATA[Reporte seguro del mes]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="389" y="35" width="45" height="11" forecolor="#000000" uuid="5f608149-fea8-4916-872c-4d3150caf9eb"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Guía]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="448" y="35" width="65" height="11" forecolor="#000000" uuid="52e02e78-bbcd-43ae-ba15-8d55e05891d3"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Transporte]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="1" y="35" width="32" height="11" forecolor="#000000" uuid="038bc91a-0ccc-4a1b-a796-16a5d9f8eb59"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Docto]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="114" y="35" width="56" height="11" forecolor="#000000" uuid="a45cf72f-3edd-4766-8ae1-c7d097b86d7f"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Cliente]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="36" y="35" width="44" height="11" forecolor="#000000" uuid="e4cd7e8b-d011-44c4-b06d-fad31f651f0c"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="325" y="35" width="54" height="11" forecolor="#000000" uuid="5064f2b3-54f9-4747-9561-738578b6ec72"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Importe]]></text>
			</staticText>
			<staticText>
				<reportElement style="Column header" x="81" y="35" width="28" height="11" forecolor="#000000" uuid="4f064204-7e37-4de6-a8b3-485e5abf0e7d"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Cajas]]></text>
			</staticText>
			<textField>
				<reportElement x="175" y="10" width="113" height="14" uuid="cfb1ddb3-39bb-423c-92d2-39a60125cf39"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{nombreReporte}]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="10" splitType="Stretch">
			<line>
				<reportElement positionType="FixRelativeToBottom" x="1" y="9" width="586" height="1" uuid="9c27175e-eeaf-4784-a04e-2bdb9e6f6f58"/>
				<graphicElement>
					<pen lineWidth="0.5" lineColor="#999999"/>
				</graphicElement>
			</line>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="36" y="0" width="44" height="10" uuid="934c83aa-a11d-488f-a131-4e70712097dd"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="81" y="0" width="28" height="10" uuid="0ca51bfd-0160-4f31-99d8-9e1f17c899cc"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cajas}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="0" y="0" width="33" height="10" uuid="a1ad51c8-93b1-42a8-a329-d7ae080b61d1"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{remicion}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00">
				<reportElement x="325" y="0" width="54" height="10" uuid="e2902b6d-3f5a-4b3d-b67b-bdb698c17c3e"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{importe}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="114" y="0" width="19" height="10" uuid="9b5fa039-b711-444d-b87a-251112faebc4"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cliente}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="136" y="0" width="166" height="10" uuid="2db27d98-c11f-4c45-a497-af7a8947596d"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nomcliente}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="389" y="0" width="45" height="10" uuid="83181065-9403-45c8-9298-59b242310691"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{guia}]]></textFieldExpression>
			</textField>
			<textField pattern="###0">
				<reportElement x="448" y="0" width="139" height="10" uuid="0dc6f8a6-edca-4ec9-9054-1e9c7715e8f3"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{transp}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="13" splitType="Stretch">
			<staticText>
				<reportElement style="Column header" x="12" y="1" width="62" height="12" forecolor="#000000" uuid="bf4b6b79-8bad-420e-a7ba-97568b08664a"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Total general:]]></text>
			</staticText>
			<line>
				<reportElement x="14" y="0" width="365" height="1" uuid="277bb294-e74f-4298-8ce3-f97c247295db"/>
			</line>
			<textField pattern="###0" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="81" y="1" width="28" height="12" forecolor="#000000" backcolor="#FFFFFF" uuid="3072a3b7-9c9a-4112-a508-1a3917a44ac7"/>
				<textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{cajas_2}]]></textFieldExpression>
			</textField>
			<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
				<reportElement mode="Transparent" x="325" y="1" width="54" height="12" forecolor="#000000" backcolor="#FFFFFF" uuid="9ea96f87-b0a5-4f3f-ba66-d74d736bd166"/>
				<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
					<font fontName="SansSerif" size="7" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{importe_2}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
